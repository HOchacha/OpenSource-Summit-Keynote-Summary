# CubeFS in Action: Empowering Users Through Case Studies - Leon Chang, OPPO

다중 선택: KubeCon 2025 EU

## 쿠바FS(CubeFS) 개요

**핵심 요약**

쿠바FS는 CNCF 졸업 클라우드 네이티브 분산 파일·오브젝트 스토리지로, 강력한 일관성과 확장성, 멀티 프로토콜 지원, 분산 캐시·지능형 데이터 티어링을 통해 AI·클라우드 환경 전반의 스토리지 요구를 충족합니다.

---

### 1. 아키텍처

- **클라이언트 서브시스템**
    - S3·ADLS·POSIX 등 다양한 인터페이스 지원
    - 메타데이터 조회·캐시 요청 등 백엔드와 잦은 통신
- **메타데이터 서브시스템**
    - Raft 기반 강력한 일관성
    - 확장성·트래시·감사 로그·POSIX 동시성 제어 지원
- **스토리지 엔진**
    - **멀티-리플리카**: 동기/비동기 복제
    - **코딩 스토리지**: Erasure Coding 기반
- **분산 캐시**
    - 메모리·디스크 양방향 지원
    - 일관성 해싱, 세그먼트(1 MiB)→슬롯→노드 매핑
    - 엣지 프라이밍·지연 최소화·지역별 로드 밸런싱
- **지능형 데이터 티어링**
    - 사용 패턴 기반 핫·콜드 데이터 자동 마이그레이션
    - 사용자 장애 방지용 리스 시스템, 이력 보존, 무중단 전환

---

### 2. 주요 기능

- **멀티 프로토콜**: S3, ADLS, POSIX VFS, Kubernetes CSI 플러그인
- **강력 일관성**: Raft·Quorum 읽기/쓰기
- **듀얼 엔진**: 리플리카·코딩 스토리지 병행 지원
- **분산 캐시**: AI 워크로드용 고성능·저지연 읽기 가속
- **지능형 티어링**: 온디맨드 티어 전환으로 비용 절감
- **Kubernetes 통합**: CSI·Sidecar 모드로 클러스터 내 네이티브 사용

---

### 3. 엔터프라이즈 적용 사례

### A. AI 스토리지 플랫폼

- **데이터 전처리**: 다양한 소스 결합·필터링 → 광범위 확장성
- **모델 학습**: 반복적 대량 읽기 → 저지연·고처리량
- **추론 배포**: 모델 CDN 유사 분산 캐시 → 멀티 리전 빠른 제공
- **대규모 모델(LLM) 대응**: 다수 파라미터·체크포인트 관리 → 비용·리소스 최적화

### B. 멀티 리전 지리 분산

- **중앙 스토리지 + 엣지 캐시**:
    - 본사에 전체 저장, 각 리전에 디스크·메모리 캐시 배치
    - 업데이트는 인크리멘털 복제
- **일관성 보장**: 주기적 잔여 데이터 검증·복구
- **대역폭 최적화**: 필요한 페이로드만 전송 → 예산 절감

### C. 컴퓨트·스토리지 분리 (ClearHouse)

- **기존 단일 노드 한계**: 디스크 공간·IOPS 부족 → 운영 복잡도
- **분리 아키텍처**:
    - 컴퓨트 노드(Stateless) ← CSI로 마운트
    - 쿠바FS 백엔드(Shared Storage)
- **장점**: 무제한 스케일아웃, O&M 간소화, 자동 복구

### D. 고성능 SDK 통합

- **Fuse 대체**: 사용자 모드 직접 RW → 커널 오버헤드 제거
- **Key–Value 서비스**: append-only 워크로드(예: 로그, SST)→ P99 < 1 ms 달성
- **특수 요구 대응**: 블록 크기·전송 최적화, 동시성 제어

---

### 4. 로드맵

- **v3.1 “Distributed Cache”**:
    - 캐시 노드 확장·리전별 라우팅
    - 엣지 프라이밍 인터페이스
- **v3.5+ “Enhanced Cache”**:
    - 프라이밍 스케줄링, QoS 제어
- **v4.0 “Hybrid Storage”**:
    - 온프레미스 ↔ 퍼블릭 클라우드 티어링
    - S3 외부 스토리지 연동

---

### 5. 커뮤니티 및 기여

- **GitHub**: [https://github.com/cubefs](https://github.com/cubefs)
- **CNCF Graduation**: [프로젝트 페이지](https://www.cncf.io/projects/cubefs/)
- **Slack 채널**: #cubefs-support
- **문서 & 이슈**:
    - 설치 가이드, CSI 튜토리얼
    - 기능 제안·버그 리포트 환영

––

더 자세한 내용이나 데모 요청, 파트너십 문의는 위 채널을 통해 언제든 환영합니다!